var D=Object.defineProperty,N=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(d,l,u)=>l in d?D(d,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[l]=u,U=(d,l)=>{for(var u in l||(l={}))F.call(l,u)&&M(d,u,l[u]);if(I)for(var u of I(l))G.call(l,u)&&M(d,u,l[u]);return d},z=(d,l)=>N(d,A(l));import{r as w,z as H,b as O,e as T,o as q,C as i,D as n,E as p,u as r,G as W,H as x,I as e,R as J,O as f,J as S,S as K,K as c,F as h,M as _,P as Y,q as L,L as j,B as Q}from"./vendor-core-CO7h4P2b.js";import{_ as X}from"./MainLayout-Cz5ClpIl.js";import{_ as Z}from"./RichTextEditor-DPOnXzj8.js";import{S as ee,Y as te,h as B,G as se,V as oe}from"./ui-DSYp2kT5.js";import"./utils-DxgFcSvi.js";import"./Navbar-C9okvRBf.js";import"./ApplicationLogo-DfgTY2Xe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./editor-CR33kXkQ.js";const re={class:"py-6 sm:py-8"},le={class:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8"},ae={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},ie=["disabled"],ne={key:0,class:"mt-1 text-sm text-red-600"},de=["disabled"],ue=["value"],me={key:0,class:"mt-1 text-sm text-red-600"},ce={key:0,class:"mt-1 text-sm text-red-600"},pe={key:0,class:"hidden"},fe={class:"space-y-2"},ge={class:"relative group"},ve=["disabled"],be={key:0,class:"bg-red-50 border-l-4 border-red-400 p-3 sm:p-4 rounded-md"},xe={class:"flex flex-col sm:flex-row gap-2 sm:gap-0"},he={class:"ml-3"},ye={key:0,class:"text-sm text-red-600"},we={key:1,class:"space-y-4 mt-8"},_e={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-2"},ke={class:"px-2.5 py-0.5 text-sm font-medium bg-blue-100 text-blue-800 rounded-full self-start sm:self-auto"},Ce={class:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4"},Le=["src","alt"],je=["onClick"],Ve={key:2,class:"space-y-4 mt-8"},Ie={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-2"},Me={class:"px-2.5 py-0.5 text-sm font-medium bg-green-100 text-green-800 rounded-full self-start sm:self-auto"},Ue={class:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4"},ze=["src","alt"],Se={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 bg-gradient-to-t from-black/60 to-black/20"},Be=["onClick"],Pe=["onClick"],Re={class:"flex justify-between items-center"},Ee=["disabled"],$e={class:"fixed inset-0 overflow-y-auto"},De={class:"flex min-h-full items-center justify-center p-4 text-center"},Ne={class:"mt-4 flex justify-end space-x-3"},Ye={__name:"Edit",props:{post:{type:Object,required:!0},subfapps:{type:Array,required:!0}},setup(d){const l=w(!1),u=()=>{Q.delete(route("posts.destroy",m.post.id),{onSuccess:()=>{l.value=!1}})},m=d,o=H({title:m.post.title||"",content:m.post.content||"",subfapp_id:m.post.subfapp_id||"",images:[],removedImages:[],_method:"PUT"}),k=O(()=>(m.post.images||[]).map(s=>z(U({},s),{url:`/storage/${s.image_path}`})));T(()=>{m.post&&(o.title=m.post.title||"",o.content=m.post.content||"",o.subfapp_id=m.post.subfapp_id||"")});const v=w(new Set),y=a=>{var t;return((t=v.value)==null?void 0:t.has(a))||!1},C=w(null),g=w([]),P=a=>{const t=a.target.files;t.length&&(Array.from(t).forEach(s=>{o.images.push(s),g.value.push(URL.createObjectURL(s))}),a.target.value="")};q(()=>{g.value.forEach(a=>window.URL.revokeObjectURL(a))});const R=a=>{v.value.has(a)?(v.value.delete(a),o.removedImages=Array.from(v.value)):(v.value.add(a),o.removedImages=Array.from(v.value))},V=a=>{URL.revokeObjectURL(g.value[a]),g.value.splice(a,1),o.images.splice(a,1)},E=()=>{o.post(route("posts.update",m.post.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{o.images=[],o.removedImages=[],v.value.clear(),g.value=[],C.value&&(C.value.value="")}})};return(a,t)=>(n(),i(h,null,[p(r(W),{title:"Edit Post"}),p(X,null,{default:x(()=>[e("div",re,[e("div",le,[e("div",ae,[t[20]||(t[20]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Edit Post",-1)),e("form",{onSubmit:J(E,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[e("div",null,[t[6]||(t[6]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),S(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>r(o).title=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:r(o).processing},null,8,ie),[[K,r(o).title]]),r(o).errors.title?(n(),i("p",ne,c(r(o).errors.title),1)):f("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{for:"subfapp",class:"block text-sm font-medium text-gray-700"},"Subfapp",-1)),S(e("select",{id:"subfapp","onUpdate:modelValue":t[1]||(t[1]=s=>r(o).subfapp_id=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:r(o).processing},[(n(!0),i(h,null,_(d.subfapps,s=>(n(),i("option",{key:s.id,value:s.id}," f/"+c(s.name),9,ue))),128))],8,de),[[Y,r(o).subfapp_id]]),r(o).errors.subfapp_id?(n(),i("p",me,c(r(o).errors.subfapp_id),1)):f("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{for:"content",class:"block text-sm font-medium text-gray-700"},"Content",-1)),p(Z,{modelValue:r(o).content,"onUpdate:modelValue":t[2]||(t[2]=s=>r(o).content=s),disabled:r(o).processing,class:"mt-1"},null,8,["modelValue","disabled"]),r(o).errors.content?(n(),i("p",ce,c(r(o).errors.content),1)):f("",!0)]),m.post?(n(),i("pre",pe,c(m.post),1)):f("",!0),e("div",fe,[t[11]||(t[11]=e("div",{class:"flex flex-col space-y-1"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Upload Images"),e("span",{class:"text-sm text-gray-500"},"Supported formats: JPEG, PNG, GIF, WEBP")],-1)),e("div",ge,[e("input",{ref_key:"imageInput",ref:C,type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif,image/webp",multiple:"",onChange:P,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:r(o).processing},null,40,ve),t[9]||(t[9]=e("div",{class:"border border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-colors duration-200"},[e("div",{class:"space-y-3"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"text-sm"},[e("span",{class:"text-blue-500 hover:text-blue-600 font-medium"},"Click to upload"),e("span",{class:"text-gray-600"}," or drag and drop")])])],-1))]),r(o).errors.images||Object.keys(r(o).errors).some(s=>s.startsWith("images."))?(n(),i("div",be,[e("div",xe,[t[10]||(t[10]=e("div",{class:"flex-shrink-0 hidden sm:block"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",he,[r(o).errors.images?(n(),i("p",ye,c(r(o).errors.images),1)):f("",!0),a.key.startsWith("images.")?(n(!0),i(h,{key:1},_(r(o).errors,(s,b)=>(n(),i("p",{key:b,class:"text-sm text-red-600"},c(s),1))),128)):f("",!0)])])])):f("",!0)]),k.value.length>0?(n(),i("div",we,[e("div",_e,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Current Images",-1)),e("span",ke,c(k.value.length),1)]),e("div",Ce,[(n(!0),i(h,null,_(k.value,s=>(n(),i("div",{key:s.id,class:"relative group aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200"},[e("img",{src:s.url,alt:"Image "+s.id,class:L(["w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",{"opacity-40 scale-100":y(s.id)}])},null,10,Le),e("div",{class:L(["absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 bg-gradient-to-t from-black/60 to-black/20",{"opacity-100":y(s.id)}])},[e("button",{type:"button",onClick:b=>R(s.id),class:L(["px-3 sm:px-4 py-1.5 sm:py-2 text-sm font-medium rounded-lg shadow-sm transition-all duration-200 transform hover:scale-105",y(s.id)?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"])},c(y(s.id)?"Keep":"Remove"),11,je)],2)]))),128))])])):f("",!0),g.value.length?(n(),i("div",Ve,[e("div",Ie,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-gray-800"},"New Images",-1)),e("span",Me,c(g.value.length),1)]),e("div",Ue,[(n(!0),i(h,null,_(g.value,(s,b)=>(n(),i("div",{key:b,class:"relative group aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200"},[e("img",{src:s,alt:"New image "+(b+1),class:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"},null,8,ze),e("div",Se,[e("button",{type:"button",onClick:$=>V(b),class:"px-4 py-2 text-sm font-medium rounded-lg shadow-sm bg-red-500 hover:bg-red-600 text-white transition-all duration-200 transform hover:scale-105"}," Remove ",8,Be)]),e("button",{type:"button",onClick:$=>V(b),class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,Pe)]))),128))])])):f("",!0),e("div",Re,[e("button",{type:"button",onClick:t[3]||(t[3]=s=>l.value=!0),class:"group inline-flex items-center px-4 py-2 text-sm font-medium bg-red-50 text-red-700 hover:bg-red-100 rounded-lg transition-all duration-200 border border-red-200 hover:border-red-300 shadow-sm hover:shadow"},[...t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-red-500 group-hover:text-red-600",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),j(" Delete Post ",-1)])]),e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:r(o).processing}," Update Post ",8,Ee)]),p(r(ee),{appear:"",show:l.value,as:"template"},{default:x(()=>[p(r(te),{as:"div",onClose:t[5]||(t[5]=s=>l.value=!1),class:"relative z-50"},{default:x(()=>[p(r(B),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:x(()=>[...t[16]||(t[16]=[e("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),e("div",$e,[e("div",De,[p(r(B),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:x(()=>[p(r(se),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:x(()=>[p(r(oe),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:x(()=>[...t[17]||(t[17]=[j(" Delete Post ",-1)])]),_:1}),t[19]||(t[19]=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete this post? This action cannot be undone. ")],-1)),e("div",Ne,[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t[4]||(t[4]=s=>l.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-red-500 shadow-sm hover:shadow transition-all duration-200",onClick:u},[...t[18]||(t[18]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),j(" Delete ",-1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],32)])])])]),_:1})],64))}};export{Ye as default};
