import{C as l,D as a,I as e,r as b,z as R,k as j,E as w,u as s,G as N,H as $,F as y,M as _,q as M,U as E,L as C,X as G,K as u,R as B,O as p,J as V,P as K,S as U,Y as H,V as Z}from"./vendor-core-CO7h4P2b.js";import{_ as q}from"./MainLayout-Cz5ClpIl.js";import{r as O,_ as J}from"./RichTextEditor-DPOnXzj8.js";import"./utils-DxgFcSvi.js";import"./Navbar-C9okvRBf.js";import"./ApplicationLogo-DfgTY2Xe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ui-DSYp2kT5.js";import"./editor-CR33kXkQ.js";function W(f,x){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Y(f,x){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function X(f,x){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const Q={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative"},ee={class:"mb-4 bg-white dark:bg-gray-900 rounded-t-md shadow-sm border border-gray-200 dark:border-gray-700 p-4"},te={class:"mt-3 flex overflow-x-auto pb-1 border-b border-gray-200 dark:border-gray-700"},re=["onClick"],oe={class:"bg-white dark:bg-gray-900 rounded-b-md shadow-sm border border-gray-200 dark:border-gray-700 p-4"},se={class:"mb-4"},ae=["value"],le={key:0,class:"mt-1 text-sm text-red-500"},ne={key:0,class:"mt-1 text-sm text-red-500"},ie={key:0},de={key:0,class:"mt-1 text-sm text-red-500"},ue={key:1,class:"rounded-md"},ce={class:"flex flex-col justify-center items-center px-6 pt-8 pb-8 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200"},me={key:0,class:"mx-auto h-16 w-16 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},pe={key:1,class:"w-full"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ve=["src"],he={key:1,class:"h-48 w-full object-cover",controls:""},be=["src"],ye=["onClick"],fe={class:"flex items-center space-x-2"},xe=["for"],ke=["id","multiple","accept"],we={class:"text-sm text-gray-500 dark:text-gray-400"},_e={key:2,class:"mt-3 text-sm text-red-500"},Me={key:2,class:"space-y-4"},Ce={class:"flex flex-wrap gap-2 mb-2"},Ve=["onClick"],je={class:"relative"},Be=["onKeydown"],Ue={key:0,class:"mt-1 text-sm text-red-500"},Ae={class:"flex justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},Pe=["disabled"],$e={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ne={__name:"Create",props:{subfapps:{type:Array,required:!0},auth:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(f){const x=[{id:"text",name:"Post",icon:W},{id:"image",name:"Images",icon:X},{id:"video",name:"Video",icon:Y},{id:"link",name:"Link",icon:O}],d=b("text"),v=b(""),c=b([]),g=b(""),m=b([]),t=R({subfapp_id:"",title:"",content:"",tags:"",images:[],link_url:""});j(c,n=>{t.tags=n.join(",")},{immediate:!0}),j(g,n=>{t.content=n}),j(d,n=>{n!=="text"&&(t.content=""),n!=="link"&&(g.value=""),n!=="image"&&n!=="video"&&(t.images=[],m.value=[])});const A=()=>{const n=v.value.trim();n&&c.value.length<5&&!c.value.includes(n)&&(c.value.push(n),v.value="",t.tags=c.value.join(","))},I=n=>{c.value.splice(n,1),t.tags=c.value.join(",")},L=n=>{const r=Array.from(n.target.files),o=d.value==="image";if(!o&&r.length>1){alert("You can only upload one video file for video posts");return}r.forEach(i=>{const h=i.type.startsWith("image/"),S=i.type==="video/mp4",T=h?5*1024*1024:10*1024*1024;if(i.size>T){alert(`File ${i.name} is too large. Maximum size is ${h?"5MB":"10MB"}.`);return}if(o&&!h){alert("Please upload only image files (JPG, PNG, GIF) in the Images tab.");return}if(!o&&!S){alert("Please upload only MP4 files in the Video tab.");return}if(!o&&t.images.length>0){t.images=[i],m.value=[];const k=new FileReader;k.onload=D=>{m.value.push(D.target.result)},k.readAsDataURL(i);return}t.images.push(i);const P=new FileReader;P.onload=k=>{m.value.push(k.target.result)},P.readAsDataURL(i)})},z=n=>{t.images.splice(n,1),m.value.splice(n,1)},F=()=>{d.value==="link"&&(t.content=g.value),t.post(route("posts.store"),{preserveScroll:!0,onSuccess:()=>{t.reset(),m.value=[],c.value=[],v.value="",g.value=""}})};return(n,r)=>(a(),l(y,null,[w(s(N),{title:"Create Post"}),w(q,null,{default:$(()=>[e("div",Q,[e("div",ee,[r[5]||(r[5]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Create a post",-1)),e("div",te,[(a(),l(y,null,_(x,o=>e("button",{key:o.id,onClick:i=>d.value=o.id,class:M(["flex items-center px-4 py-2 whitespace-nowrap mr-4 text-sm font-medium",[d.value===o.id?"text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"]]),type:"button"},[(a(),E(G(o.icon),{class:"w-5 h-5 mr-2","aria-hidden":"true"})),C(" "+u(o.name),1)],10,re)),64))])]),e("div",oe,[e("form",{onSubmit:B(F,["prevent"]),class:"space-y-6"},[e("div",se,[V(e("select",{id:"subfapp","onUpdate:modelValue":r[0]||(r[0]=o=>s(t).subfapp_id=o),class:M(["block w-full pl-3 pr-10 py-3 text-base border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",{"border-red-500":s(t).errors.subfapp_id}])},[r[6]||(r[6]=e("option",{value:""},"Choose a community",-1)),(a(!0),l(y,null,_(f.subfapps,o=>(a(),l("option",{key:o.id,value:o.id}," f/"+u(o.name),9,ae))),128))],2),[[K,s(t).subfapp_id]]),s(t).errors.subfapp_id?(a(),l("p",le,u(s(t).errors.subfapp_id),1)):p("",!0)]),e("div",null,[V(e("input",{type:"text",id:"title","onUpdate:modelValue":r[1]||(r[1]=o=>s(t).title=o),class:M(["block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg py-3",{"border-red-500":s(t).errors.title}]),placeholder:"Title"},null,2),[[U,s(t).title]]),s(t).errors.title?(a(),l("p",ne,u(s(t).errors.title),1)):p("",!0)]),d.value==="text"?(a(),l("div",ie,[w(J,{modelValue:s(t).content,"onUpdate:modelValue":r[2]||(r[2]=o=>s(t).content=o),class:"mt-2 min-h-[200px]",placeholder:"Text (optional)"},null,8,["modelValue"]),s(t).errors.content?(a(),l("p",de,u(s(t).errors.content),1)):p("",!0)])):["image","video"].includes(d.value)?(a(),l("div",ue,[e("div",ce,[m.value.length?p("",!0):(a(),l("svg",me,[...r[7]||(r[7]=[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),m.value.length?(a(),l("div",pe,[e("div",ge,[(a(!0),l(y,null,_(m.value,(o,i)=>(a(),l("div",{key:i,class:"relative rounded-md overflow-hidden"},[s(t).images[i].type.startsWith("image/")?(a(),l("img",{key:0,src:o,class:"h-48 w-full object-cover"},null,8,ve)):(a(),l("video",he,[e("source",{src:o,type:"video/mp4"},null,8,be)])),e("button",{onClick:h=>z(i),type:"button",class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 focus:outline-none shadow-lg"},[...r[8]||(r[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ye)]))),128))])])):p("",!0),e("div",fe,[e("label",{for:d.value==="image"?"image-upload":"video-upload",class:"cursor-pointer px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium text-gray-700 dark:text-gray-300"},[e("span",null,"Upload "+u(d.value==="image"?"images":"video"),1),e("input",{id:d.value==="image"?"image-upload":"video-upload",type:"file",multiple:d.value==="image",class:"sr-only",accept:d.value==="image"?".jpg,.jpeg,.png,.gif,.webp":".mp4",onChange:L},null,40,ke)],8,xe),e("span",we,u(d.value==="image"?"Images up to 5MB":"Video up to 10MB"),1)]),s(t).errors.images?(a(),l("p",_e,u(s(t).errors.images),1)):p("",!0)])])):d.value==="link"?(a(),l("div",Me,[V(e("input",{type:"url","onUpdate:modelValue":r[3]||(r[3]=o=>g.value=o),class:"block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 py-3",placeholder:"URL"},null,512),[[U,g.value]])])):p("",!0),e("div",null,[e("div",Ce,[(a(!0),l(y,null,_(c.value,(o,i)=>(a(),l("span",{key:i,class:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-sm rounded-full"},[C(" #"+u(o)+" ",1),e("button",{type:"button",class:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 ml-1",onClick:h=>I(i)}," × ",8,Ve)]))),128))]),e("div",je,[r[9]||(r[9]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})])],-1)),V(e("input",{type:"text",class:M(["pl-10 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5",{"border-red-500":s(t).errors.tags}]),placeholder:"Add tags (press Enter or comma to add)","onUpdate:modelValue":r[4]||(r[4]=o=>v.value=o),onKeydown:[H(B(A,["prevent"]),["enter"]),H(B(A,["prevent"]),["comma"])]},null,42,Be),[[U,v.value]])]),r[10]||(r[10]=e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Add up to 5 tags to describe what your post is about ",-1)),s(t).errors.tags?(a(),l("p",Ue,u(s(t).errors.tags),1)):p("",!0)]),e("div",Ae,[w(s(Z),{href:n.route("home"),class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:$(()=>[...r[11]||(r[11]=[C(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",class:"inline-flex justify-center items-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-full text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-75 disabled:cursor-not-allowed transition-all duration-200",disabled:s(t).processing},[s(t).processing?(a(),l("svg",$e,[...r[12]||(r[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):p("",!0),C(" "+u(s(t).processing?"Posting...":"Post"),1)],8,Pe)])],32)])])]),_:1})],64))}};export{Ne as default};
