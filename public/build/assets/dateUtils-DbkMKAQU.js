var D=Object.defineProperty,E=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(e,o,t)=>o in e?D(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,$=(e,o)=>{for(var t in o||(o={}))q.call(o,t)&&I(e,t,o[t]);if(M)for(var t of M(o))F.call(o,t)&&I(e,t,o[t]);return e},z=(e,o)=>E(e,K(o));import{r as B,b as A,e as N,j as U,C as s,D as l,O as g,q as f,F as V,M as G,I as a,K as b,Y as L,R as k,n as O}from"./vendor-core-CO7h4P2b.js";const S=["onClick"],T={class:"relative flex items-center justify-center w-full h-full bg-black"},Y=["src"],H=["src"],J={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-[2px] transition-opacity duration-300"},P={class:"text-center text-white transition-transform duration-300 transform group-hover:scale-110"},Q={class:"block text-3xl font-bold"},W={class:"text-sm font-medium text-white/90"},X={class:"relative max-h-[90vh] max-w-[90vw] flex items-center justify-center select-none bg-black rounded-lg"},Z=["src"],_=["src"],ee={key:2,class:"absolute px-4 py-2 text-sm font-medium text-white -translate-x-1/2 rounded-full bottom-4 left-1/2 bg-black/50 backdrop-blur-sm"},ne={__name:"ImageGallery",props:{images:{type:Array,required:!0}},setup(e){const o=e,t=B(null),d=B(null),c=n=>`/storage/${n.image_path}`,h=n=>n.width&&n.height?n.width/n.height:null,u=A(()=>o.images.map(n=>z($({},n),{aspect_ratio:h(n)}))),i=A(()=>t.value?u.value.findIndex(n=>n.id===t.value.id):-1),v=n=>{t.value=n,O(()=>{d.value&&d.value.focus()})},y=()=>{t.value=null},p=()=>{i.value>0&&(t.value=u.value[i.value-1])},w=()=>{i.value<u.value.length-1&&(t.value=u.value[i.value+1])},x=n=>{if(t.value)switch(n.key){case"ArrowLeft":p();break;case"ArrowRight":w();break;case"Escape":y();break}};return N(()=>{document.addEventListener("keydown",x)}),U(()=>{document.removeEventListener("keydown",x)}),(n,r)=>{var j;return l(),s("div",null,[(j=e.images)!=null&&j.length?(l(),s("div",{key:0,class:f(["grid gap-1 overflow-hidden bg-black rounded-xl",{"grid-cols-1":e.images.length===1,"grid-cols-2":e.images.length>=2}])},[(l(!0),s(V,null,G(e.images.slice(0,Math.min(4,e.images.length)),(m,R)=>(l(),s("div",{key:m.id,class:f(["relative group cursor-pointer overflow-hidden bg-black flex items-center justify-center",{"h-[500px]":e.images.length===1,"h-[250px]":e.images.length>=2}]),onClick:C=>v(m)},[a("div",T,[m.type==="video"?(l(),s("video",{key:0,src:c(m),class:f(["transition-all duration-500 group-hover:scale-105 group-hover:brightness-105",e.images.length===1?"max-h-[500px] w-auto object-contain":"w-full h-full object-cover"]),controls:"",autoplay:"",loop:"",muted:"",playsinline:""},null,10,Y)):(l(),s("img",{key:1,src:c(m),alt:"",class:f(["transition-all duration-500 group-hover:scale-105 group-hover:brightness-105",e.images.length===1?"max-h-[500px] w-auto object-contain":"w-full h-full object-cover"]),loading:"lazy",style:{"font-size":"0","line-height":"0"}},null,10,H))]),r[2]||(r[2]=a("div",{class:"absolute inset-0 transition-opacity duration-300 opacity-0 bg-gradient-to-t from-black/20 to-transparent group-hover:opacity-100"},null,-1)),R===3&&e.images.length>4?(l(),s("div",J,[a("div",P,[a("span",Q,"+"+b(e.images.length-4),1),a("span",W," more "+b(e.images.some(C=>C.type==="video")?"media":"photos"),1)])])):g("",!0)],10,S))),128))],2)):g("",!0),t.value?(l(),s("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/95 backdrop-blur-sm",onClick:y,onKeydown:[L(p,["left"]),L(w,["right"])],tabindex:"0",ref_key:"modalRef",ref:d},[a("button",{class:"absolute text-white transition-colors duration-200 top-6 right-6 hover:text-gray-300 focus:outline-none",onClick:y},[...r[3]||(r[3]=[a("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),i.value>0?(l(),s("button",{key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 p-2.5 text-white bg-black/50 hover:bg-black/70 rounded-full backdrop-blur-sm transition-all duration-200 focus:outline-none active:scale-95 z-20 touch-manipulation",onClick:k(p,["stop"])},[...r[4]||(r[4]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])])):g("",!0),i.value<e.images.length-1?(l(),s("button",{key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 text-white bg-black/50 hover:bg-black/70 rounded-full backdrop-blur-sm transition-all duration-200 focus:outline-none active:scale-95 z-20 touch-manipulation",onClick:k(w,["stop"])},[...r[5]||(r[5]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)])])):g("",!0),a("div",X,[t.value.type==="video"?(l(),s("video",{key:0,src:c(t.value),class:"max-h-[90vh] max-w-[90vw] object-contain select-none",controls:"",autoplay:"",loop:"",muted:"",playsinline:"",onClick:r[0]||(r[0]=k(()=>{},["stop"]))},null,8,Z)):(l(),s("img",{key:1,src:c(t.value),alt:"",class:"max-h-[90vh] max-w-[90vw] object-contain select-none",onClick:r[1]||(r[1]=k(()=>{},["stop"]))},null,8,_)),e.images.length>1?(l(),s("div",ee,b(i.value+1)+" / "+b(e.images.length),1)):g("",!0)])],544)):g("",!0)])}}};function se(e){const o=new Date(e),d=Math.floor((new Date-o)/1e3),c=Math.floor(d/60),h=Math.floor(c/60),u=Math.floor(h/24),i=Math.floor(u/30),v=Math.floor(u/365);return d<60?"just now":c<60?`${c} ${c===1?"minute":"minutes"} ago`:h<24?`${h} ${h===1?"hour":"hours"} ago`:u<30?`${u} ${u===1?"day":"days"} ago`:i<12?`${i} ${i===1?"month":"months"} ago`:`${v} ${v===1?"year":"years"} ago`}export{ne as _,se as t};
